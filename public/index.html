<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIDwinder - C64 SID Music Linker</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéµ SIDwinder üéµ<br />!PREVIEW! (use at your own risk)</h1>
            <p>C64 SID Analyzer, Linker & Tool Suite</p>
        </div>

        <div class="main-content">
            <!-- File Upload Section -->
            <div class="upload-section" id="uploadSection">
                <div class="upload-icon">üìÅ</div>
                <div class="upload-text">Drop your SID file here</div>
                <div class="upload-subtext">or click to browse</div>
                <input type="file" id="fileInput" accept=".sid">
            </div>

            <!-- Song Title Display -->
            <div class="song-title-section" id="songTitleSection">
                <div class="song-title" id="songTitle">-</div>
                <div class="song-author" id="songAuthor">-</div>
            </div>

            <!-- Loading Indicator -->
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <div>Analyzing SID file...</div>
                <div class="progress-bar" id="progressBar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText"></div>
            </div>

            <!-- Error Message -->
            <div class="error-message" id="errorMessage"></div>

            <!-- Information Panels -->
            <div class="info-panels" id="infoPanels">
                <!-- File Information Panel -->
                <div class="panel">
                    <h2>üìÑ File Information</h2>
                    <div class="info-row">
                        <span class="info-label">Title:</span>
                        <span class="info-value editable" id="sidTitle" data-field="title" title="Click to edit">
                            <span class="text">-</span>
                            <span class="edit-icon">‚úèÔ∏è</span>
                        </span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Author:</span>
                        <span class="info-value editable" id="sidAuthor" data-field="author" title="Click to edit">
                            <span class="text">-</span>
                            <span class="edit-icon">‚úèÔ∏è</span>
                        </span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Copyright:</span>
                        <span class="info-value editable" id="sidCopyright" data-field="copyright" title="Click to edit">
                            <span class="text">-</span>
                            <span class="edit-icon">‚úèÔ∏è</span>
                        </span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Format:</span>
                        <span class="info-value" id="sidFormat">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Version:</span>
                        <span class="info-value" id="sidVersion">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Songs:</span>
                        <span class="info-value" id="sidSongs">-</span>
                    </div>
                </div>

                <!-- Technical Details Panel -->
                <div class="panel">
                    <h2>‚öôÔ∏è Technical Details</h2>
                    <div class="info-row">
                        <span class="info-label">Load Address:</span>
                        <span class="info-value" id="loadAddress">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Init Address:</span>
                        <span class="info-value" id="initAddress">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Play Address:</span>
                        <span class="info-value" id="playAddress">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Memory Range:</span>
                        <span class="info-value" id="memoryRange">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">File Size:</span>
                        <span class="info-value" id="fileSize">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Zero Page Usage:</span>
                        <span class="info-value" id="zpUsage">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Clock:</span>
                        <span class="info-value" id="clockType">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">SID Model:</span>
                        <span class="info-value" id="sidModel">-</span>
                    </div>
                </div>
            </div>

            <!-- Export Section -->
            <div class="export-section" id="exportSection">
                <h2>üì¶ Export Options</h2>

                <div class="export-options">
                    <div class="export-option">
                        <label for="visualizerType">Visualizer Type:</label>
                        <select id="visualizerType">
                            <option value="RaistlinBars">Raistlin Bars</option>
                            <option value="SimpleBitmap">Simple Bitmap</option>
                            <option value="SimpleRaster">Simple Raster</option>
                            <option value="none">No Visualizer</option>
                        </select>
                    </div>

                    <div class="export-option">
                        <label for="autoRun">Make Self-Running (BASIC Stub):</label>
                        <input type="checkbox" id="autoRun" checked>
                    </div>

                    <div class="export-option">
                        <label for="useCompression">Use RLE Compression:</label>
                        <input type="checkbox" id="useCompression" checked>
                    </div>
                </div>

                <div class="export-buttons">
                    <button class="export-button" id="exportSIDButton">
                        üíæ Export Modified SID
                    </button>

                    <button class="export-button" id="exportPRGButton">
                        üéÆ Export PRG with Visualizer
                    </button>
                </div>

                <div class="export-status" id="exportStatus"></div>
            </div>

            <!-- Save Button (keeping original for backwards compatibility) -->
            <div class="button-container">
                <button class="save-button" id="saveButton">üíæ Save Modified SID</button>
            </div>
        </div>
    </div>

    <!-- Modal Overlay -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal-content">
            <div class="modal-icon" id="modalIcon">‚úì</div>
            <div class="modal-message" id="modalMessage">Success!</div>
        </div>
    </div>

    <!-- Scripts - Load order is important -->
    <script src="sidwinder.js"></script>
    <script src="sidwinder-core.js"></script>
    <script src="prg-builder.js"></script>
    <script src="ui.js"></script>
</body>
</html>